{erl_opts, [debug_info]}.

{deps, []}.

{plugins, [rebar3_format]}.

{auto_plugins, [rebar3_auto]}.

{src_dirs, ["erl_src", "c_src"]}.

{port_specs, [{"priv/libsignal_protocol_nif.so", ["c_src/*.c"], "make -C c_src build"}]}.

{pre_hooks, [{compile, "make -C c_src build"}]}.

{post_hooks, [{clean, "make -C c_src clean"}]}.

{cover_enabled, true}.

{cover_opts, [verbose, {outdir, "tmp/cover"}]}.

{cover_export_enabled, true}.

{cover_export_format, html}.

{edoc_opts,
 [{preprocess, true},
  {macros, [{d, 'EDOC'}]},
  {private, true},
  {todo, true},
  {dir, "tmp/doc"}]}.

{profiles,
 [{test,
   [{deps, []},
    {erl_opts, [debug_info]},
    {src_dirs, ["erl_src", "c_src"]},
    {port_specs, [{"priv/nif.so", ["c_src/*.c"], "make -C c_src build"}]},
    {cover_opts, [verbose, {outdir, "tmp/cover"}]},
    {ct_opts, [{logdir, "tmp/ct_logs"}, {dir, "test/erl"}]}]},
  {docs,
   [{edoc_opts,
     [{preprocess, true},
      {macros, [{d, 'EDOC'}]},
      {private, true},
      {todo, true},
      {dir, "tmp/doc"}]}]}]}.

{ct_opts, [{logdir, "tmp/ct_logs"}, {dir, "test/erl"}]}.
